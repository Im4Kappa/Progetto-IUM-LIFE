<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L.I.F.E | Info Utente</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Karantina:wght@400&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inder&display=swap">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Style nostri -->
    <link rel="stylesheet" href="styles/general.css">
    <link rel="stylesheet" href="styles/dashboard.css">
    <link rel="stylesheet" href="styles/loginRegistrazione.css">

    <!-- Scripts nostri -->
    <script src="scripts/importHeaderNavbar.js"></script> <!-- Importa la Navbar e la Headbar -->
    <script src="scripts/caricaJSON.js"></script>
    <script src="scripts/utils.js"></script>
    <script src="scripts/gestioneUtente.js"></script>
    <script src="scripts/logout.js"></script>
</head>

<body>

    <div class="container custom-container mt-5 px-md-5">
        <!--TITOLO PAGINA -->
        <div class="row mb-4 align-items-center mx-5">
            <div class="col-12">
                <h1 class="titoloPagina fw-bold">INFO UTENTE</h1>
            </div>
            <div class="col-12 text-right pb-1">
                <button class="bottoneApriPannelloAggiungi bottonePersonalizzato px-4 py-1 mb-2 text-center fw-bold"
                    id="logoutBtn"><i class="bi bi-box-arrow-right me-2"></i> Logout</button>
            </div>
        </div>

        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="container">
                    <form>
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <label for="nomeInput">Nome</label>
                                <input type="text" class="form-control formInput" id="nomeInput" placeholder="Nome"
                                    aria-label="Nome">
                            </div>
                            <div class="col-md-6 mb-4">
                                <label for="cognomeInput">Cognome</label>
                                <input type="text" class="form-control formInput" id="cognomeInput"
                                    placeholder="Cognome" aria-label="Cognome">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <label for="etaInput">Età</label>
                                <input type="number" class="form-control formInput" id="etaInput" placeholder="Età"
                                    aria-label="Età">
                            </div>
                            <div class="col-md-6 mb-4">
                                <label for="sessoInput">Sesso</label>
                                <select class="form-control formInput" id="sessoInput" aria-label="Sesso">
                                    <option value="" disabled selected>Sesso</option>
                                    <option value="M">Maschio</option>
                                    <option value="F">Femmina</option>
                                    <option value="ALTRO">Altro</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <label for="altezzaInput">Altezza</label>
                                <input type="number" class="form-control formInput" id="altezzaInput"
                                    placeholder="Altezza (cm)" aria-label="Altezza">
                            </div>
                            <div class="col-md-6 mb-4">
                                <label for="pwdInput">Password</label>
                                <input type="password" class="form-control formInput" id="pwdInput"
                                    placeholder="Password" aria-label="Password">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 mb-4">
                                <label for="obbiettivoPassiInput">Obbiettivo Passi Giornalieri</label>
                                <input type="number" class="form-control formInput" id="obbiettivoPassiInput"
                                    placeholder="Obbiettivo Passi Giornalieri" aria-label="obbiettivoPassiInput">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-12 text-center">
                                <button class="bottonePersonalizzato px-4 py-1 mb-1 text-center fw-bold fs-4 mt-3"
                                    id="modificaInfoBtn">Modifica</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>

<!-- Scripts nostri -->
<script src="scripts/logout.js"></script>
<script src="scripts/gestioneInfoUtente.js"></script>
<script>
    let pathToJson = 'data/utenti.json';

    // Carica il file JSON e mostra il form popolato
    fetchJSONFile(pathToJson, function (data) {
        let utenteCompleto = getUserSession(data, idSessione);

        // Popola il form con i dati dell'utente
        document.getElementById('nomeInput').value = utenteCompleto.nomeUtente;
        document.getElementById('cognomeInput').value = utenteCompleto.cognomeUtente;
        document.getElementById('etaInput').value = utenteCompleto.etaUtente;
        document.getElementById('sessoInput').value = utenteCompleto.sessoUtente;
        document.getElementById('altezzaInput').value = utenteCompleto.altezzaUtente;
        document.getElementById('pwdInput').value = utenteCompleto.passwordUtente;
        document.getElementById('obbiettivoPassiInput').value = utenteCompleto.obbiettivoPassi;
        // Imposta il valore del campo sesso
        let sessoInput = document.getElementById('sessoInput');
        for (let i = 0; i < sessoInput.options.length; i++) {
            if (sessoInput.options[i].value === utenteCompleto.sessoUtente) {
                //console.log(sessoInput.options[i].value);
                sessoInput.selectedIndex = i;
                break;
            }
        }
    });
    userId = getIdSessione();
    modificaInfoUtenteFormPHP();
</script>

</html>